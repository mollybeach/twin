// path: src/types/types.tsx

export type UserIdType = string;
export type TwinIdType = string;
export type AgeGroup = '18-24' | '25-34' | '35-44' | '45-54' | '55+';
export type InteractionGroup = 'likes' | 'retwineets' | 'replies' | 'quotes';
export type NotificationGroup = 'create' | 'buy' | 'sell';
export type PlatformType = 'mobile' | 'desktop' | 'tablet';
export type TransactionGroup = 'buy' | 'sell';


export interface AnalyticsType {
    twinId: TwinIdType;
    clickThroughRate: number;
    engagementRate: number;
    impressions: number;
    cryptoHoldings: CryptoHoldingType[];
    demographics: DemographicsType[];
    dailyImpressions: DailyImpressionsType[];
    peakHours: PeakHoursType[];
    reachByPlatform: ReachByPlatformType[];
    topInteractions: TopInteractionsType[];
}

export interface TwinType {
    id?: string;
    userId?: UserIdType;
    twinId: TwinIdType;
    autoReply: boolean;
    timestamp: Date;
    description: string;
    personality: string;
    price: number;
    profileImage: string;
    isListed: boolean;
    twinHandle: string;
    twitterHandle: string;
    analytics: AnalyticsType;
    fetchedTweets: FetchedTweetType[];
    modelData: Record<string, unknown>;
    stats: TwinStatsType;
    tokenShares: TokenShareType;
    tokenStats: TokenStatsType;
    twineets: TwineetType[];
    verification: VerificationResponseType;
    transactions: TransactionType[];
}
export interface TwinStatsType {
    twinId: TwinIdType;
    interactions: number;
    repliesCount: number;
    uptime: string;
} 

export interface CryptoHoldingType {
    twinId: TwinIdType;
    amount: number;
    symbol: string;
    value: number;
    change24h: number;
}

export interface DailyImpressionsType {
    twinId: TwinIdType;
    count: number;
    date: Date;
}

export interface DemographicsType {
    twinId: TwinIdType;
    age: string;
    percentage: number;
}
export interface storeType {
    notification: NotificationType | null;
    setNotification: (notification: NotificationType | null) => void;
    addTwin: (twin: TwinType) => Promise<string>; // Should return a string
    buyShares: (twinId: string, shares: number) => Promise<void>;
    sellShares: (twinId: string, shares: number) => Promise<void>;
    verifyTwin: (twinId: string) => Promise<boolean>; // Should return a boolean
    getUserShares: (twinId: string) => number; // Should return a number
    getNewTwinId: () => string;
    getNewUserId: () => string;
    currentUserId: UserIdType;
    getTwins: () => TwinType[];
    updateAnalytics: (twinId: string) => void;
    getTransactionHistory: (twinId?: string) => TransactionType[]; // Should return an array
    fetchCurrentUser: () => Promise<void>;
    fetchAllTwins: () => Promise<void>;
    fetchUserShares: (userId: string) => Promise<void>;
    fetchTransactions: (userId: string) => Promise<void>;
    fetchTweets: (username: string) => Promise<void>;
    generateTwineetContent: (tweets: FetchedTweetType[], personality: string) => Promise<{ generatedText: string }>; // Update this line
    currentUserData: UserType;
    allTwins: TwinType[]; // Add this property
    currentUserTwins: TwinType[]; // Add this property
    transactions: TransactionType[]; // Add this property
    fetchedTweets: FetchedTweetType[]; // Add this property
    generatedTwineetContent: string;
    twinAdded: boolean;
}

export interface NotificationType {
    twinId: TwinIdType;
    kind: NotificationGroup;
    message: string;
    twitterHandle: string;
    twinHandle: string;
    timestamp: Date;
}

export interface PeakHoursType {
    twinId: TwinIdType;
    engagement: number;
    hour: number;
}

export interface TokenStatsType {
    twinId: TwinIdType;
    price: number;
    change24h: number;
    volume24h: number;
    marketCap: number;
}

export interface TokenShareType {
    twinId: TwinIdType;
    totalShares: number;
    availableShares: number;
    pricePerShare: number;
    shareholders: UserTokenShareType[];
};

export interface TopInteractionsType {
    twinId: TwinIdType;
    kind: InteractionGroup;
    count: number;
}

export interface UserTokenShareType {
    twinId: TwinIdType;
    userId: string;
    shares: number;
    purchasePrice: number;
    purchaseDate: Date;
}
export interface TransactionType {
    twinId: TwinIdType;
    trade: TransactionGroup;
    shares: number;
    pricePerShare: number;
    totalAmount: number;
    timestamp: Date;
}

export interface FetchedTweetType {
    twinId: TwinIdType;
    text: string;
    edit_history_tweet_ids: string[];
    timestamp: Date;
}

export interface ReachByPlatformType {
    twinId: TwinIdType;
    platform: PlatformType;
    count: number;
}

export interface TwineetType {   
    id?: string; // Optional because the ID is generated by EdgeDB       
    twinId: TwinIdType;
    content: string;
    timestamp: Date;
    likesCount: number;
    retwineetsCount: number;
    repliesCount: number;
    isLiked: boolean;
    isRetwineeted: boolean;
}

export interface LikesType {
    twinId: TwinIdType;
    userId: UserIdType;
}

export interface RetwineetsType {
    twinId: TwinIdType;
    userId: UserIdType;
}

export interface RepliesType {
    content: string;
    timestamp: Date;
    twinId: TwinIdType;
    userId: UserIdType;
}
export interface UserType {
    userId: UserIdType;
    username: string;
    email: string;
    passwordHash: string;
    birthday?: Date;
    walletBalance?: number;
    walletAddress?: string;
    twins?: TwinType[];
    transactions?: TransactionType[];
    notifications?: NotificationType[];
    tokenShares?: TokenShareType[];
    userTokenShares?: UserTokenShareType[];
    tokenStats?: TokenStatsType[];
    timestamp: Date;
    likes?: LikesType[];  
    retwineets?: RetwineetsType[];
    replies?: RepliesType[];
}

export interface PageProps extends UserType {
    userData: UserType; // Ensuring userData is correctly defined
}

export interface VerificationResponseType {
    twinId: TwinIdType;
    isVerified: boolean;
    verificationDate: Date;
    error?: string;
}

// PROPS 

export interface AnalyticsPropsType {
    twinId: TwinIdType;
    analytics: AnalyticsType;
}


export interface NotificationBarPropsType {
    twinId: TwinIdType;
    notification: NotificationGroup | null;
    onClose: () => void;
}


export interface TradeModalPropsType {
    twinId: TwinIdType;
    twinHandle: string;
    currentShares: number;
    availableShares: number;
    pricePerShare: number;
    isSelling: boolean;
    onClose: () => void;
}


export interface PriceChartPropsType {
    twinId: TwinIdType;
    shareholders: UserTokenShareType[];
    pricePerShare: number;
}

export interface SharePriceChartPropsType {
    twinId: TwinIdType;
    shareholders: UserTokenShareType[];
    pricePerShare: number;
    isExpanded: boolean;
}

export interface TradingChartPropsType {
    twinId: TwinIdType;
    transactions: TransactionType[];
    pricePerShare: number;
}

export interface ThemeStoreType {
    theme: 'light' | 'dark';
    toggleTheme: () => void;
}
