// path: src/types/types.tsx

export type AgentIdType = string;
export interface AnalyticsType {
    agentId: AgentIdType;
    clickThroughRate: number;
    engagementRate: number;
    impressions: number;
    cryptoHoldings: CryptoHoldingType;
    demographics: DemographicsType;
    dailyImpressions: DailyImpressionsType;
    peakHours: PeakHoursType;
    reachByPlatform: ReachByPlatformType;
    topInteractions: TopInteractionsType;
}

export interface AgentType {
    id?: string;
    agentId: AgentIdType;
    autoReply: boolean;
    createdAt: Date;
    description: string;
    personality: string;
    price: number;
    profileImage: string;
    isListed: boolean;
    twinHandle: string;
    twitterHandle: string;
    analytics: AnalyticsType;
    fetchedTweets: FetchedTweetType[];
    modelData: Record<string, unknown>;
    stats: AgentStatsType;
    tokenShares: TokenShareType;
    tokenStats: TokenStatsType;
    twineets: TwineetType[];
    verification: VerificationResponseType;
    transactions: TransactionType[];
}

export interface AgentStatsType {
    agentId: AgentIdType;
    interactions: number;
    replies: number;
    uptime: string;
} 

export interface CryptoHoldingType {
    agentId: AgentIdType;
    amount: number;
    symbol: string;
    value: number;
    change24h: number;
}

export interface DailyImpressionsType {
    agentId: AgentIdType;
    count: number;
    date: string;
}

export interface DemographicsType {
    agentId: AgentIdType;
    age: string;
    percentage: number;
}

export interface MarketplaceStoreType {
    agents: AgentType[];
    transactions: TransactionType[];
    notification: NotificationType | null;
    setNotification: (notification: NotificationType | null) => void;
    addAgent: (agent: AgentType) => Promise<string>;
    buyShares: (agentId: string, shares: number) => Promise<void>;
    sellShares: (agentId: string, shares: number) => Promise<void>;
    verifyAgent: (agentId: string) => Promise<boolean>;
    getUserShares: (agentId: string) => number;
    getAgents: () => AgentType[];
    updateAnalytics: (agentId: string) => void;
    getTransactionHistory: (agentId?: string) => TransactionType[];
}

export interface NotificationType {
    agentId: AgentIdType;
    kind: 'create' | 'buy' | 'sell';
    message: string;
    twitterHandle: string;
    twinHandle: string;
    timestamp: number;
}

export interface PeakHoursType {
    agentId: AgentIdType;
    engagement: number;
    hour: number;
}

export interface TokenStatsType {
    agentId: AgentIdType;
    price: number;
    change24h: number;
    volume24h: number;
    marketCap: number;
}

export interface TokenShareType {
    agentId: AgentIdType;
    totalShares: number;
    availableShares: number;
    pricePerShare: number;
    shareholders: UserTokenShareType[];
};

export interface TopInteractionsType {
    agentId: AgentIdType;
    kind: string;
    count: number;
}

export interface UserTokenShareType {
    agentId: AgentIdType;
    userId: string;
    shares: number;
    purchasePrice: number;
    purchaseDate: string;
}
export interface TransactionType {
    agentId: AgentIdType;
    kind: 'buy' | 'sell';
    shares: number;
    pricePerShare: number;
    totalAmount: number;
    timestamp: string;
}

export interface FetchedTweetType {
    agentId: AgentIdType;
    text: string;
    edit_history_tweet_ids: string[];
    timestamp: string;
}

export interface ReachByPlatformType {
    agentId: AgentIdType;
    platform: string;
    count: number;
}

export interface TwineetType {   
    id?: string; // Optional because the ID is generated by EdgeDB       
    agentId: AgentIdType;
    content: string;
    timestamp: Date;
    likes: number;
    retwineets: number;
    replies: number;
    isLiked: boolean;
    isRetwineeted: boolean;
}

export interface VerificationResponseType {
    agentId: AgentIdType;
    isVerified: boolean;
    verificationDate: Date;
    error?: string;
}

// PROPS 

export interface AnalyticsPropsType {
    agentId: AgentIdType;
    analytics: AnalyticsType;
}


export interface NotificationBarPropsType {
    agentId: AgentIdType;
    notification: NotificationType | null;
    onClose: () => void;
}


export interface TradeModalPropsType {
    agentId: AgentIdType;
    twinHandle: string;
    currentShares: number;
    availableShares: number;
    pricePerShare: number;
    isSelling: boolean;
    onClose: () => void;
}


export interface PriceChartPropsType {
    agentId: AgentIdType;
    shareholders: UserTokenShareType[];
    pricePerShare: number;
}

export interface SharePriceChartPropsType {
    agentId: AgentIdType;
    shareholders: UserTokenShareType[];
    pricePerShare: number;
    isExpanded: boolean;
}

export interface TradingChartPropsType {
    agentId: AgentIdType;
    transactions: TransactionType[];
    pricePerShare: number;
}

export interface ThemeStoreType {
    theme: 'light' | 'dark';
    toggleTheme: () => void;
}
